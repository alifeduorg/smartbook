<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mentor Timetable Planner</title>
  <style>
    body {
      background-color: white;
      font-family: Arial, sans-serif;
    }

    header {
      background: linear-gradient(#f9d342, #e0b400);
      color: navy;
      padding: 20px;
      font-size: 24px;
      font-weight: bold;
      box-shadow: 0 5px 10px rgba(0,0,0,0.3);
      text-align: center;
      border-bottom: 4px solid navy;
    }

    .container {
      max-width: 1000px;
      margin: 30px auto;
      border: 2px solid navy;
      padding: 20px;
      border-radius: 12px;
    }

    label, select, input {
      display: block;
      margin: 10px 0;
    }

    table {
      width: 100%;
      margin-top: 20px;
      border-collapse: collapse;
    }

    th, td {
      padding: 10px;
      border: 1px solid navy;
      text-align: center;
    }

    button {
      background-color: navy;
      color: white;
      padding: 10px 20px;
      border: none;
      margin-top: 10px;
      border-radius: 5px;
      cursor: pointer;
    }

    .delete-btn {
      background-color: crimson;
    }

    .day-title {
      background-color: #f0f0f0;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <header>Mentor Timetable Planner</header>

  <div class="container">
    <label>Week Start Date:
      <input type="date" id="weekStart">
    </label>

    <label>Select Student:
      <select id="studentSelect">
        <option value="">-- Select Student --</option>
      </select>
    </label>

    <div id="timetable"></div>

   <button onclick="submitTimetable()">Submit</button>
  </div>

<script>
  const scriptURL = "https://script.google.com/macros/s/AKfycbxJ-IGsjzrqUlykZEgK_BtLtz4O7BCF8tv8_Hus1dOENrN_Wnr0NzTAT38KMGamy-XJlQ/exec";

  async function submitTimetable() {
    const weekStart = document.getElementById("weekStart").value;
    const studentId = document.getElementById("studentSelect").value;
    const studentName = document.getElementById("studentSelect").selectedOptions[0].text;
    const table = document.getElementById("timetableBody");

    const entries = [];
    for (let row of table.rows) {
      const day = row.querySelector(".day").value;
      const time = row.querySelector(".time").value;
      const subject = row.querySelector(".subject").value;
      const teacher = row.querySelector(".teacher").value;
      const link = row.querySelector(".link").value;

      if (day && time && subject && teacher) {
        entries.push({ day, time, subject, teacher, link });
      }
    }

    if (entries.length === 0) {
      alert("Please add at least one timetable entry.");
      return;
    }

    const data = {
      weekStart,
      studentId,
      studentName,
      entries
    };

    try {
      const res = await fetch(scriptURL, {
        method: "POST",
        body: JSON.stringify(data),
        headers: {
          "Content-Type": "application/json"
        }
      });

      const result = await res.json();
      if (result.success) {
        alert("Timetable submitted successfully.");
        location.reload(); // Optional: Refresh the form
      } else {
        alert("Error submitting timetable.");
      }
    } catch (error) {
      alert("Submission failed: " + error);
    }
  }
</script>

</body>
</html>
